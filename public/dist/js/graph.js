!function(e){function t(e){console&&console.log&&console.log(e)}function a(){e.ajax({url:fieldsUrl,data:{sp:slug},dataType:"json",success:function(a){t("done"),dateInfo=a.dateInfo,dateInfo.minQuarterAny=re(dateInfo.minDateAny),dateInfo.minQuarterAll=re(dateInfo.minDateAll),dateInfo.maxQuarterAny=re(dateInfo.maxDateAny),dateInfo.maxQuarterAll=re(dateInfo.maxDateAll),e(".dbDate").text(dateInfo.dbDateFormatted),fieldset=a.param,tableInfo=a.tableInfo,fieldsetDisplay=a.display,fieldsetLag=a.lag;for(var d in tableInfo){if(r(tableInfo[d]),null===tableInfo[d].charts&&delete tableInfo[d].charts,null===tableInfo[d].multicharts&&delete tableInfo[d].multicharts,"undefined"!=typeof tableInfo[d].charts)for(var s=0;s<tableInfo[d].charts.length;s++)r(tableInfo[d].charts[s]);if("undefined"!=typeof tableInfo[d].multicharts)for(var o in tableInfo[d].multicharts){var f=tableInfo[d].multicharts[o];if(f.length)for(var s=0;s<f.length;s++)r(f[s]);else r(f)}}n(),i(),l(),le()},error:function(e,a,r){"undefined"!=typeof r&&r&&Ee(),t("error: "+a)}})}function r(e){if("undefined"!=typeof e.chartType)switch(e.chartType){case"line":e.chartClass=google.visualization.LineChart;break;case"area":e.chartClass=google.visualization.AreaChart;break;case"column":e.chartClass=google.visualization.ColumnChart;break;case"steppedArea":e.chartClass=google.visualization.SteppedAreaChart;break;case"scatterChart":e.chartClass=google.visualization.LineChart;break;case"combo":e.chartClass=google.visualization.ComboChart;break;default:e.chartClass=google.visualization.Table}}function n(){fieldsetName={};for(var t in fieldsetDisplay){var a=fieldsetDisplay[t];a&&(fieldsetName[t]=a.legend)}R("displayFields","filter"),R("dateFields","dateType"),R("dateFields","filter"),R("dateFields","param"),R("demographicFields","filter"),R("demographicFields","param"),R("locationFields","filter"),R("locationFields","param"),R("advancedFields","filter"),R("advancedFields","param"),dateFields=[],V(dateInfo.minQuarterAny.year,dateInfo.minQuarterAny.quarter,dateInfo.maxQuarterAny.year,dateInfo.maxQuarterAny.quarter),e(".show").show(),e(".hide").hide(),M(),h(),e("input[type='checkbox']").click(function(t){var a=!0,r=(e(":checked"),f({multiply:!0})),n=40;currentTable&&currentTable.info&&currentTable.info.maxChecked&&(n=currentTable.info.maxChecked);var i=r>n;if(i){var l="Sorry, we are not able to show that many lines on the graph at once. Please use the table or select fewer filter options.";e(".loading").hide(),Ee(l),setTimeout(function(){e(".loading").hide()},8e3),a=!1}else e(".loading").hide();return a}),e("#update").click(le),e("#reset").click(v)}function i(){for(var e=0;e<colorGroupRaw.length;e++){for(var t=colorGroupRaw[e],a=[],r=0;r<t.length;r++){for(var n=t[r],i=n.split("+"),l=[],d=0;d<i.length;d++)for(var s=i[d],o=colorPallete[s],f=0;f<o.length;f++){var u=o[f];l.push(u)}a.push(l)}colorGroup.push(a)}}function l(){var e=window.location.hash;e&&e.length>1&&(e=e.substring(1)),window.location.hash="";for(var t=e.split("&"),a={},r=0;r<t.length;r++){var n,i,l=t[r],s=l.indexOf("=");s?(n=l.substr(0,s),i=l.substr(s+1)):(n=l,i="");var o=a[n];"undefined"!=typeof o?o.push(i):o=[i],a[n]=o}for(n in a)i=a[n],d(n,i);h()}function d(a,r){var n=e("#"+a);"table"===a?n.val(r[0]):"multichart"===a?n.attr("data-permalink",r[0]):n.hasClass("config-type-dateRange")||n.hasClass("config-type-dynamicDateRange")?s(a,r):n.hasClass("config-type-param")||n.hasClass("config-type-filter")?o(n,r):t("Unexpected parameter to set: "+a)}function s(a,r){var n="#"+a;t("paramToFielsetRange "+a),e(n+" .control").slider("values",r),e(n).attr("data-sliderSet","true"),U(n,r[0],r[1]),H(n,r[0],r[1])}function o(e,t){if("undefined"!=typeof t&&t.length){e.find('input[type="checkbox"]').prop("checked",!1),e.find("input.last-checked").removeClass("last-checked"),e.find("input.is-checked").removeClass("is-checked");for(var a=0;a<t.length;a++){var r=t[a],n=e.find('input[value="'+r+'"]');n.prop("checked",!0),n.addClass("is-checked")}n.addClass("last-checked")}}function f(t){var a=e.extend({includeDateRange:!1,multiply:!1},t),r=0;a.multiply&&(r=1);for(var n=0;n<currentTable.params.length;n++){var i=info.params[n],l=e("#"+i),d=l.hasClass("config-type-dateRange")||l.hasClass("config-type-dynamicDateRange");if(!d||a.includeDateRange){var s=e("#"+i+" :checked"),o=s.length;a.multiply?(0===o&&(o=1),r*=o):r+=o}}return r}function u(e){var t=0,a=typeof e;if("object"===a&&(t=e.length,"undefined"==typeof t)){t=0;for(var r in e)e.hasOwnProperty(r)&&t++}return t}function c(t,a){if("undefined"!=typeof t){"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++){var n=t[r],i=fieldset[n],l=typeof i,d=Object.keys(tableInfo)[0];(u(i)>1||"undefined"===l)&&(e("#"+n).parents("li.filter").addClass("open"),e("#"+n).show(),e("#"+n).addClass("visible"),a.mutexAllOthers&&e("#"+n).addClass("mutexAll"),fieldsetDisplay[n].help&&p(n,fieldsetDisplay[n],d),A(n))}}}function p(t,a,r){var n=e("#help-"+t).length;if(0===n)if("object"==typeof a.help){var i="",l=a.help[r]||a.help["default"];i+="<dt id='help-"+t+"'>"+a.legend+"</dt><dd class='helpContent'>"+l+"</dd>"}else i="<dt id='help-"+t+"'>"+a.legend+"</dt><dd class='helpContent'>"+a.help+"</dd>";e("#filter-help dl").append(i)}function h(a){e("fieldset").hide(),e("fieldset").removeClass("required"),e("fieldset").removeClass("visible"),e("fieldset").removeClass("mutexAll"),e(".fieldset").hide(),e(".fieldset").removeClass("required"),e(".fieldset").removeClass("visible"),e(".fieldset").removeClass("mutexAll");var r=Object.keys(tableInfo)[0],n=se(r);if("undefined"==typeof n)return void t("No table defined");n.showAllOthers?e(".fieldInputAll").removeClass("hideFieldInputAll"):e(".fieldInputAll").addClass("hideFieldInputAll"),c(n.params,n),c(n.controls,n),"undefined"!=typeof n.multicharts&&c("multichart",n);for(var i=0;i<dateFields.length;i++){var l=dateFields[i][0];if(e("#"+l).hasClass("visible")){e("#"+l+" input[type='checkbox']").hide(),e("#"+l+" tr.year").hide();var d=re(n.tableDate.maxDateAny),s=re(n.tableDate.minDateAny),o=s.year,f=d.year;e("#"+l).attr("data-date-min",n.tableDate.minDateAny),e("#"+l).attr("data-date-max",n.tableDate.maxDateAny);for(var u=o;u<=f;u++){e("#"+l+" tr.year"+u).show();for(var p=1;p<=4;p++)u==o&&p>=s.quarter||u>o&&u<f||u==f&&p<=d.quarter?e("#"+l+" .year"+u+" .quarter"+p+" input[type='checkbox']").show():e("#"+l+" .year"+u+" .quarter"+p+" input[type='checkbox']").hide()}var h=e("#"+l+" :checked").length;if(0==h){var v=n.tableDate.maxDateAll,g="#"+l+" input[value='"+v+"']",b=e(g);b.prop("checked","checked")}}}if(e(".range").each(function(){var t=this.id,a=e("#"+t).hasClass("visible");if(a){var r=e("#"+t+" :checked").length;if(0==r||r>60){var i,l=ae(n.tableDate.maxDateAny);i="undefined"!=typeof n.tableDate.minDateAny?ae(n.tableDate.minDateAny):"undefined"!=typeof n.tableDate.maxDateYr?ae(n.tableDate.maxDateYr)-12:"undefined"!=typeof n.tableDate.maxDateQtr?ae(n.tableDate.maxDateQtr)-12:l-12,i=Math.max(0,i),$(t,i,l)}}}),e("#month").hasClass("visible")){var h=e("#month :checked").length;0==h&&e("#month input[type='checkbox']").prop("checked","checked")}if(e("#monthSelector").hasClass("visible")){e("#monthSelector .selector").show();var h=e("#monthSelector .selected :checked").length;if(0==h){var v=n.tableDate.maxDateAll,y="selected-monthSelector",C=K(v),w=v,x={type:"selector",selected:w},T="selector";m(y,w,C,x,T)}}for(var i=0;i<n.requiredParams.length;i++){var k=n.requiredParams[i],D=e("#"+k);D.addClass("required")}var A=e(".mutexAll");A.each(function(t,a){var r=e(this).find("div.fieldInputAll input:checked"),n=e(this).find("div.fieldInput input:checked"),i=r?r.length:0;n?n.length:0;i&&e(this).find("div.fieldInput input").attr("checked",!1)});var I=e("#advancedLeft").find("div.visible"),R=e("#advancedRight").find("div.visible");0===I.length&&0===R.length&&e("#advancedHeader").hide()}function v(){e(".range").each(function(e,t){$(this.id)}),e("#selected-monthSelector").empty(),e(".mutexAllFirst").removeClass("mutexAllFirst"),e('.fieldset input[type="checkbox"]').prop("checked",!1),e(".fieldset input.default-value").prop("checked",!0),e(".fieldset input.last-checked").removeClass("last-checked"),e(".fieldset input.default-value").addClass("last-checked"),e(".fieldset input.is-checked").removeClass("is-checked"),e(".fieldset input.default-value").addClass("is-checked"),h(),M(),le()}function g(t,a){var r="",n=[];if(e("#"+a+" input:checked").each(function(){n.push(e(this).val())}),n.length>0&&(r=n.join(),"undefined"!=typeof t))if(fieldsetDisplay[a]&&fieldsetDisplay[a].alias){var i=fieldsetDisplay[a].alias;t[i]=r}else t[a]=r;return r}function b(e,t,a,r,n){for(var i=0;i<t.length;i++){var l=t[i],d=l.split("|");m(e,d[1],d[0],a,r,n)}}function y(t,a){var r="div-"+t+a;e("#"+r).remove()}function m(t,a,r,n,i,l){"undefined"==typeof i&&(i="fieldInput"),"undefined"==typeof g&&(g={});var d=void 0,s=!1;"string"==typeof a?d=parseInt(a):"number"==typeof a&&(d=""+a),(fe(n.disabled,a)||fe(n.disabled,d))&&(s=!0);var o="div-"+t+a,f="<div id='"+o+"' class='"+i+"'/>",u=e("#"+t);if(u.append(f),u=e("#"+o),a<0&&"-"==r)u.append("<hr class='"+i+"'/>");else{var c="<input type='checkbox' id='"+t+a+"' value='"+a+"' class='"+i+"'/>";u.append(c);var p=u.find("input:last");for(var h in l){var v=l[h];if(v){var g=v[t];if(g){var b=g[a];p.attr("data-"+h,b)}}}if(n.format){var y=n.format[a];p.attr("data-format",y)}var m="<label for='"+t+a+"' class='"+i+"'>"+r+"</label>";u.append(m)}if(("filter"===n.type||"selector"===n.type||"param"===n.type)&&"undefined"!=typeof n.selected){var w=""+n.selected,x=""+a,T=parseInt(x,10);(w===x||"*"===n.selected||"string"!=typeof n.selected&&fe(n.selected,x)||"string"!=typeof n.selected&&fe(n.selected,T))&&(e("#"+t+a).addClass("default-value"),e("#"+t+a).addClass("last-checked"),e("#"+t+a).addClass("is-checked"),e("#"+t+a).prop("checked",!0))}s&&(e("#"+o).addClass("disabled"),e("#"+t+a).attr("disabled",!0)),e("#"+t+a).click(function(r){var n=!1,i=e("#"+t+a).prop("checked"),l=!i,d=e("#"+t),s=d.hasClass("config-type-filter"),o=d.hasClass("config-multi"),f=d.hasClass("mutexAll"),u=d.hasClass("mutexAllFirst"),c=d.hasClass("selected"),p=d.hasClass("has-lag"),h=e("#multichart :hidden"),v=e("#multichart .multiAllowed :checked"),g=h&&h.length||v&&v.length,b=o&&g,y=d.hasClass("config-type-dateType");if(i?(e("#"+t+" input.last-checked").removeClass("last-checked"),e("#"+t+a).addClass("last-checked"),e("#"+t+a).addClass("is-checked")):e("#"+t+a).removeClass("is-checked"),s&&b){var i=e("#"+t+a).prop("checked"),l=!i,m=e("#"+t+" input:checked"),w=m.length;0!=w?(e("#"+t+a).prop("checked",i),n=!0):e("#"+t+a).prop("checked",l)}else if(s&&!b)e("#"+t+" input").prop("checked",!1),e("#"+t+a).prop("checked",!0),n=!0;else if(f){if(0==a)e("#"+t+" input").prop("checked",!1),e("#"+t+a).prop("checked",!0);else{var x=e("#"+t+"0").prop("checked");if(x)e("#"+t+"0").prop("checked",!1),e("#"+t+a).prop("checked",!0);else{var i=e("#"+t+a).prop("checked"),l=!i,m=e("#"+t+" input:checked"),w=m.length;0!=w?(e("#"+t+a).prop("checked",i),n=!0):e("#"+t+a).prop("checked",l)}}n=!0}else c?e("#div-"+t+a).empty().remove():u||(0===a?e("#"+t+a).prop("checked",!0):(e("#"+t+"0").prop("checked",!1).removeClass("is-checked"),e("#"+t).addClass("mutexAllFirst")));var T=C(t);if(n=n||T,p&&_(),y){var k=e("#"+t+" input:checked"),D=k.val();M(D)}setTimeout(function(){n&&Ae()},50)})}function C(t){"undefined"==typeof t&&(t="multichart");var a=!1,r=e("#multichart .multiAllowed :checked"),n=r&&r.length;return"multichart"!==t||n||(e(".config-multi input").prop("checked",!1),e(".config-multi input.is-checked").prop("checked",!0),a=!0),a}function w(){var t=0;return e(".has-lag input:checked").each(function(a){var r=e(this),n=parseInt(r.attr("data-lag"),10);t=n<t?n:t}),t}function x(e,t,a){var r=new Date(a.getTime()),n=e.attr("data-date-max");n&&(r=ee(n));var i=r.getTime(),l=24*t*60*60*1e3;i+=l,r.setTime(i);var d=te(r);return d}function T(t){e("#"+t+" div.fieldInput").show(),e("#"+t+" div.fieldInputAll").show(),e("#"+t).addClass("showHide-show"),e("#"+t).removeClass("showHide-hide")}function k(t){e("#"+t+" div.fieldInput").hide(),e("#"+t+" div.fieldInputAll").hide(),e("#"+t).addClass("showHide-hide"),e("#"+t).removeClass("showHide-show")}function D(t){e("#"+t).hasClass("showHide-show")?k(t):T(t)}function A(t){e("#"+t).hasClass("showHide-show")?T(t):k(t)}function I(e,t,a){return"undefined"==typeof e[t]&&(e[t]=a),e}function R(e,t){for(var a in fieldsetDisplay){var r=fieldsetDisplay[a];r&&e===r.column&&t===r.type&&F(r.column,a,r.legend,void 0,r)}}function F(a,r,n,i,l){"undefined"==typeof n&&(n=fieldsetName[r]),"undefined"==typeof l&&(l={}),I(l,"type","param"),I(l,"multi",!1),I(l,"sort",!1),I(l,"selected",0),I(l,"resultUnavailable","show");var d=fieldsetLag[r],s=l.type;"cohort"===s||"dateRange"===s||"dateSelect"===s?s="param":"dynamicDateRange"!==s&&"dateType"!==s||(s="filter"),e("#"+a).append("<div class='fieldset' id='"+r+"'></div>"),S(r,n,l),"undefined"==typeof i&&(i=fieldset[r]);var o="undefined"!=typeof i&&"undefined"!=typeof i.length&&i.length&&"string"==typeof i[0]&&i[0].indexOf("|")>0;I(l,"zeroLast",!o);var f=void 0,u=0,c="filter"===s?void 0:"fieldInputAll",p=[],h=l.zeroLast?1:0;if("array"==typeof i){for(var v=h;v<i.length;v++){var g=i[v];g.indexOf("|")>0?p.push(g):p.push(""+g+"|"+v)}l.zeroLast&&null!=i[0]&&i[0].length>0&&(f=i[0])}else if("object"==typeof i){for(var y in i)(!l.zeroLast||0!==y&&"0"!==y)&&p.push(""+i[y]+"|"+y);l.zeroLast&&null!=i[0]&&i[0].length>0&&(f=i[0])}else t("typeof values="+typeof i);if(l.sort===!0)p.sort(),p=O(p);else if("string"==typeof l.sort){var C=ze[l.sort];p.sort(C)}else p=O(p);var w={lag:fieldsetLag};b(r,p,l,void 0,w),"undefined"!=typeof f&&m(r,u,f,l,c,w);var x="filter"==s;"undefined"!=typeof l.visible&&(x=l.visible),x?T(r):k(r);var D=e("#"+r);D.addClass("config-type-"+s),s!==l.type&&D.addClass("config-type-"+l.type),l.multi&&D.addClass("config-multi"),d&&D.addClass("has-lag"),D.addClass("result-unavailable-"+l.resultUnavailable)}function O(e){for(var t=[],a=[],r={},n=0;n<e.length;n++){var i=e[n].split("|");0==i[1].indexOf("-")?r[i[1]]=e[n]:a.push(e[n])}for(n=0;n<a.length;n++){t.push(a[n]);var i=a[n].split("|"),l=r["-"+i[1]];"undefined"!=typeof l&&t.push(l)}return t}function L(e,t){var a=0,r=e.split("|"),n=t.split("|"),i=r[1],l=n[1];if(i>0&&l>0)a=i-l;else if(0==i||0==l){var d=1;if(0==i){d=-1;var s=i;i=l,l=s}a=i==-1?1:i<=8?-1:1,a*=d}else{var d=1;if(i==-1){d=-1;var s=i;i=l,l=s}a=i<=8?-1:1,a*=d}return a}function q(e,t){var a=0,r=e.split("|"),n=t.split("|"),i=r[1],l=n[1],d=1;if(i>l){var s=i;i=l,l=s,d=-1}return a=1==i?-1:2==i?1:2==l?-1:1,a*=d}function S(t,a,r){"undefined"==typeof a&&(a=e("#"+t+" .fieldsetLabel").text());var n=" <span class='show'></span><span class='hide'></span>";e("#"+t).html(""),e("#"+t).append("<div class='fieldsetHeader showhide'><span class='fieldsetLabel'>"+a+"</span>"+n+"</div>"),e("#"+t+" .showhide").click(function(){D(t)})}function N(){e("table.quarter tr.quarter-header th").html("&nbsp;");for(var t=2;t<=4;t++)e("table.quarter .quarter"+t).hide();if("undefined"!=typeof currentTable&&"undefined"!=typeof currentTable.info)for(var a=re(currentTable.info.tableDate.minDateAny),r=re(currentTable.info.tableDate.maxDateAny),n=a.year;n<=r.year;n++)e("table.quarter .year"+n+" .quarter1 input[type='checkbox']").show();e("table.quarter tr.year").each(function(t,a){var r=e(this).find("input:checked");if(r.length>0){var n=e(this).find("td.quarter1 input"),i=n.attr("checked");i||(n.addClass("yearMarker"),n.attr("checked",!0))}}),e(".fieldset-cohort .fieldsetLabel").each(function(t,a){var r=e(this).text();r=r.replace(/Quarter/g,"Year"),e(this).text(r)})}function j(e,t,a,r){var n=e.parent(),i=n.attr(t);i||"undefined"==typeof currentTable||"undefined"==typeof currentTable.info||"undefined"!=typeof currentTable.info.tableDate&&(i=currentTable.info.tableDate[a]),i||(i=r);var l=re(i);return l}function E(){for(var t=1;t<=4;t++)e("table.quarter tr.quarter-header th.quarter"+t).html("Q"+t),e("table.quarter .quarter"+t).show();e("table.quarter").each(function(t){for(var a=e(this),r=j(a,"data-date-min","minDateAny","2000-01-01"),n=j(a,"data-date-max","maxDateAny",te()),i=r.year;i<=n.year;i++)for(var l=1;l<=4;l++){var d=a.filter(".year"+i+" .quarter"+l+" input[type='checkbox']");i==r.year&&l>=r.quarter||i==n.year&&l<=n.quarter||i>r.year&&i<n.year?d.show():d.hide()}}),e("input.yearMarker").attr("checked",!1),e("input.yearMarker").removeClass("yearMarker"),e(".fieldset-cohort .fieldsetLabel").each(function(t,a){var r=e(this).text();r=r.replace(/Year/g,"Quarter"),e(this).text(r)})}function M(t){"undefined"==typeof t&&(t=e(".config-type-dateType.visible input:checked").val()),2==t?N():E()}function z(t,a){t.find("input:disabled").prop("disabled",!1),t.find("input").each(function(t){var r=e(this),n=r.val();n>a&&r.prop("disabled",!0)})}function _(t){"undefined"==typeof t&&(t=w());var a=dateInfo.maxDateAny,r=ee(a);e(".fieldset-cohort").each(function(a){var n=e(this),i=x(n,t,r);z(n,i)})}function V(e,t,a,r){for(var n in fieldsetDisplay){var i=fieldsetDisplay[n];i&&i.type&&("dateRange"===i.type||"dynamicDateRange"===i.type?P(i.column,n,i.legend,e,t,a,r,i):"dateSelect"===i.type&&G(i.column,n,i.legend,e,t,a,r,i))}}function P(t,a,r,n,i,l,d,s){"undefined"==typeof s&&(s={}),I(s,"monthStep",1),I(s,"monthLimit",60);var o=s.monthStep,f=s.monthLimit,u=3*i-2,c=3*d,p=B(n,u),h=B(l,c);F(t,a,r,[],s);var v="#"+a;e(v).addClass("range"),e(v).append("<p class='slider'><span class='fromDate'></span> through <span class='toDate'></span></p>"),e(v).append("<div class='slider control' data-startVal='"+p+"' data-endVal='"+h+"'></div>"),e(v).append("<div class='values'></div>"),e(v+" .values").append("<input id='step' type='hidden' value='"+o+"'/>"),e(v+" .values").append("<input class='date-start' type='hidden' value='"+W(p)+"'/>"),e(v+" .values").append("<input class='date-end'   type='hidden' value='"+W(h)+"'/>"),e(v+" .values").append("<input class='date-limit' type='hidden' value='"+f+"'/>"),e(v+" .values").hide();var g=e(v).hasClass("config-type-filter");g&&Y(v),e(v+" .control").slider({range:!0,min:p,max:h,step:o,values:[p,h],slide:function(e,t){return Q(v,e,t,f)},change:function(e,t){return Q(v,e,t,f)}})}function Q(e,t,a,r){var n=a.values[0],i=a.values[1];H(e,n,i,r)}function H(a,r,n,i){if(t("updateMonthsRangeValues selector="+a+" startVal="+r+" endVal="+n),"undefined"==typeof i&&(i=e(a).find(".date-limit").val(),"string"==typeof i&&(i=parseInt(i,10))),t("updateMonthsRangeValues limit="+i),i>0&&n-r>i)return!1;var l=e(a).hasClass("config-type-filter");U(a,r,n),l?"undefined"!=typeof currentTable&&($selector=e(a),$selector.find(".date-start").val(W(r)),$selector.find(".date-end").val(W(n)),Me&&clearTimeout(Me),Me=setTimeout(Ae,200)):Y(a)}function U(t,a,r){e(t+" .fromDate").text(J(a)),e(t+" .toDate").text(J(r))}function Y(t){if("true"===e(t).attr("data-sliderset")){var a=parseInt(e(t+" #step").val(),10),r=e(t+" .values"),n=e(t+" .control").slider("option","values")[0],i=e(t+" .control").slider("option","values")[1];r.html(""),r.append("<input id='step' type='hidden' value='"+a+"'/>"),r.append("<input class='date-start' type='hidden' value='"+W(n)+"'/>"),r.append("<input class='date-end'   type='hidden' value='"+W(i)+"'/>");for(var l=n;l<=i;l+=a){var d=W(l);r.append("<input type='checkbox' value='"+d+"' checked='checked'/>")}}}function $(a,r,n){var i,l,d="#"+a+" .control",s=e(d);if("undefined"==typeof r&&"undefined"==typeof n)i=s.slider("option","min"),l=s.slider("option","max");else{if(i=r,l="undefined"!=typeof n?n:Math.max(0,i-12),l<i){var o=i;i=l,l=o}s.slider("option","min",i),s.slider("option","max",l)}var f="true"===e("#"+a).attr("data-sliderSet");t("isSet "+a+" "+f),f||(s.slider("values",0,i),s.slider("values",1,l),e("#"+a).attr("data-sliderset","true"),U("#"+a,i,l)),Y("#"+a)}function G(t,a,r,n,i,l,d,s){"undefined"==typeof s&&(s={}),I(s,"monthStep",1);var o=s.monthStep,f=3*i-2,u=3*d;B(n,f),B(l,u);F(t,a,r,[]);var c="#"+a,p="selected-"+a;e(c).append('<div id="'+p+'" class="selected">'),e(c).append("<select>"),c="#"+a+" select",e(c).append('<option value="">Add Month/Year</option>');for(var h=n;h<=l;h++)for(var v=1;v<=12;v+=o){var g=!0;if((h==n&&v<f||h==l&&v>u)&&(g=!1),g){var b=Z(h,v),C=K(b),w=""+C+"|"+b;e(c).append('<option value="'+w+'">'+C+"</option>")}}e(c).change(function(t){var a=e(c).val(),r=a.split("|"),n=r[0],i=r[1],l={type:"selector",selected:i},d="selector";y(p,i),m(p,i,n,l,d),e(c).val("")})}function B(e,t){var a=1998,r=12*(e-a)+t-1;return r}function W(e){var t=1998,a=e%12+1,r=Math.floor(e/12),n=t+r,i=a;a<10&&(i="0"+a);var l=""+n+"-"+i+"-01";return l}function J(e){var t=W(e),a=K(t);return a}function X(e){var t="string"==typeof e&&null!=e.match(/^\d{4}-\d{2}-\d{2}/);return t}function Z(e,t){t<10&&(t="0"+t);var a=""+e+"-"+t+"-01";return a}function K(e){var t=e;if(X(e)){var a=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=e.substr(0,4),n=e.substr(5,2),i=parseInt(n,10),l=a[i];t=l+" "+r}return t}function ee(e){var t;if(X(e)){var a=e.substr(0,4),r=e.substr(5,2),n=parseInt(a,10),i=parseInt(r,10);t=new Date(n,i,1)}return t}function te(e){"undefined"==typeof e&&(e=new Date);var t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),a=a<10?"0"+a:a,r=r<10?"0"+r:r,n=""+t+"-"+a+"-"+r;return n}function ae(e){var t=-1;if(X(e)){var a=e.substring(0,4),r=parseInt(a,10),n=e.substring(5,7),i=parseInt(n,10);t=B(r,i)}return t}function re(e){var t=e;if(X(e)){var a=parseInt(e.substring(0,4),10),r=e.substring(5,7),n=Math.floor((parseInt(r,10)+2)/3);t={year:a,quarter:n}}return t}function ne(e){var t=e,a=re(e);return"object"==typeof a&&(t=""+a.year+"Q"+a.quarter),t}function ie(e,t){var a,r;switch("undefined"==typeof t&&(t=-1),"string"==typeof t&&(r=t,t=parseInt(t,10)),t){case 0:a=K(e);break;case 1:a=ne(e);break;case 2:var n=re(e);a=n.year?""+n.year:e;break;default:if(r&&X(e)){var i=ee(e),l=new google.visualization.DateFormat({pattern:r});a=l.formatValue(i)}else a=X(e)?K(e):e}return a}function le(){for(var e=Object.keys(tableInfo)[0],a=se(e),r={},n=0;n<a.params.length;n++)g(r,a.params[n]);for(var i=!0,n=0;n<a.requiredParams.length;n++){var l=r[a.requiredParams[n]];null!=l&&0!=l.length||(i=!1,t("missing:"+a.requiredParams[n]))}i?de(e,r):Ee()}function de(a,r){e("#updateLoader").show();var n=tableUrl.replace("${table}",slug),i=setTimeout(function(){var t="We have not run this query before, so the data may take a while to load...";e("#loadMsg").text(t),e("#loadMsg").show()},5e3);e.ajax({url:n,data:r,dataType:"json",success:function(t){var l="?"+e.param(r);thisUrl={json:n+l,xlsx:n.replace("json","xlsx")+l,csv:n.replace("json","csv")+l};var d=se(a),s=ve(d),o=pe(d,t.row,s),f=he(d,t.row);e("#updateLoader").hide(),e("#loadMsg").hide(),clearTimeout(i),Ce(t,o,f,s),be("filtersUsed",t.params)},error:function(e,a,r){"undefined"!=typeof r&&r&&Ee(),t("error: "+a)}})}function se(e){var t=tableInfo[e];return null==t&&(t=tableInfo["default"]),t}function oe(e){var t=!1;if("undefined"!=typeof e)for(var a=1;a<e.length-1;a++)t=t||e[a]!==e[a+1];return t}function fe(t,a){var r=!1;if("undefined"!=typeof t){var n=e.inArray(a,t);r=n!=-1}return r}function ue(e){var t=void 0;if("undefined"!=typeof e)for(var a=0;a<e.length;a++){var r=e[a];(void 0===t||r<t)&&(t=r)}return t}function ce(a,r,n,i,l){var d=[],s=!1;if(a.length>0)for(var o=0;o<a[0].length;o++)d[o]=void 0;for(var f=void 0,u=void 0,c=e(".config-type-dateType.visible").attr("id"),o=0;o<a.length&&void 0===f;o++){var p=a[o][0];p===c?f=o:"date_type"===p&&(u=o)}void 0===f&&(f=u);for(var o=0;o<r.length;o++){var h=r[o],v=a[h];if(oe(v)||s)for(var g=0;g<v.length;g++){var b=v[g];if(fe(n,h)){var y=void 0;void 0!==f&&(y=a[f][g]),b=ie(b,y)}if(fe(i,h)){var m=a[h][0],C=fieldset[m];if("undefined"==typeof C){var w=l[m];"undefined"!=typeof w&&(C=fieldset[w])}if("undefined"!=typeof C){var x=C[b];b=x}else t("Problem with header row "+h+": "+m+":"+w)}void 0==d[g]?d[g]=b:d[g]+=" / "+b}}for(var o=0;o<d.length;o++)void 0==d[o]&&(d[o]="");return[d]}function pe(t,a,r){var n=ce(a,t.returnRowHeaders,t.returnRowDateHeaders,t.returnRowControlHeaders,r),i=a.slice(t.returnRowStart,a.length),l=[];e.extend(!0,l,i);var d=n.concat(l);return d}function he(e,t){var a=[];if(t&&t.length>0){for(var r=t[0].length,n=0;n<r;n++)a[n]={};for(var i=0;i<e.returnRowStart;i++)for(var l=t[i][0],n=0;n<r;n++)a[n][l]=t[i][n]}return a}function ve(e){for(var t={},a=0;a<e.headerNames.length;a++){var r=e.headerNames[a],n=r.split(/[*=]/);2===n.length&&(t[n[1]]=n[0],t[n[0]]=n[1])}return t}function ge(e,t){var a=[];if("undefined"==typeof e)return[];if("undefined"==typeof t)return e;for(var r=0;r<e.length;r++)fe(t,r)||a.push(e[r]);return a}function be(t,a,r){"undefined"==typeof r&&(r=!1),e("#"+t).html("Filters:<ul></ul>");for(var n in a){var i=a[n],l=[];"undefined"==typeof i||null!=i&&""!==i?(i=""+i,l=i.split(",")):r&&(l="0");for(var d=void 0,s=0;s<dateFields.length;s++)dateFields[s][0]===n&&(d=dateFields[s]);var o=fieldset[n],f="",u=!1,c=!1;if(0!=l.length||u?"undefined"!=typeof o?(f=fieldsetName[n],formatter=function(e){var t=o[e];if(o[0].indexOf("|")>=0)for(var a=0;a<o.length;a++){var r=o[a].indexOf("|"),n=o[a].substring(0,r),i=o[a].substring(r+1);e===i&&(t=n)}return t}):"undefined"!=typeof d?(f=d[1],formatter=function(e){return ne(e)}):c=!0:c=!0,!c)if(e("#"+t+" ul:first").append('<li class="filter"></li>'),0==l.length)e("#"+t+" ul:first li:last").text(f);else if(1==l.length)e("#"+t+" ul:first li:last").text(f+": "+formatter(l[0]));else{e("#"+t+" ul:first > li:last").text(f+": "),e("#"+t+" ul:first > li:last").append("<ul class='filtersUsed-"+n+"'></ul>");for(var s=0;s<l.length;s++){var p=formatter(l[s]);e("#"+t+" ul.filtersUsed-"+n).append("<li>\r\n\t\t"+p+"</li>")}}}}function ye(e,t){for(var a=void 0,r=0;r<e.length&&!a;r++){var n=e[r],i=n.indexOf("*"),l=void 0,d=void 0;0==i?(l=n.substring(1),d=l):i>0&&(l=n.substring(0,i),d=n.substring(i+1)),l&&l===t&&(a=d)}return a}function me(t,a){for(var r=t.values,n=[],i=t.row,l=a.returnRowHeaders,d=[],s=0;i&&i.length&&s<l.length;s++){var o=l[s],f=i[o][0];d.push(f)}var u=void 0;if(a.transform)if(a.transform.startDateField){u=a.transform.startDateField;var o=e.inArray(u,d);o>=0&&d.splice(o,1),a.transform.dateField&&d.push(a.transform.dateField)}else u=a.transform.dateField;var c=[],p=a.transform?a.transform.Function:"";if("undefined"==typeof i||0==i.length);else if("trim"===p||""===p)for(var h=a.returnRowStart,s=h;s<i.length;s++){var f=i[s][0];f.match(/^[0-9]+$/g)&&(f="M"+f),fe(c,f)||c.push(f)}else for(var s=1;s<i[0].length;s++){var f=i[0][s];fe(c,f)||c.push(f)}for(var v=[""],s=0;s<c.length;s++){var f=c[s];f=f.replace(/_/g," "),v.push(f)}n.push(v);for(var g=[""],s=0;s<r.length;s++){for(var b=r[s],y=[],m={},C=0;C<d.length;C++){var w=d[C],x=b[w];if(void 0!==x){var T=ye(a.headerNames,w);T&&(x=fieldset[T][x]),m[w]=x}}if("undefined"!=typeof u){var k=b[u],D=e(".config-type-dateType.visible"),A=D.attr("id"),I=b[A],R=D.find('[value="'+I+'"]'),F=R.attr("data-format"),O=F||R.val(),L=ie(k,O);m[u]=L}g.push(m),y.push("");for(var q=0;q<c.length;q++){var S=c[q],N=b[S];y.push(N)}n.push(y)}var j={values:r,rows:n,rowHeaders:g,headerField:d,dateField:u,dataField:c};return j}function Ce(t,a,r,n){for(var i=t.table,l=t.table,d=t.params,s=t.row,o=1;o<a.length;o++){var f=""+a[o][0];if(f=f.replace(/_/g," "),0==f.indexOf("M")){var u=f.substring(1);a[o][0]=u}else f.match(/^\d{4}-\d{2}/g)?a[o][0]=f:a[o][0]=f}var c=se(i),p=0==a.length||1==a.length,h=0;p||(h=a[0].length);var v=a[1]&&a[1][0].length>3,g=(new RegExp("[^A-Za-z0-9]","g"),[[new RegExp("-","g")," "],[new RegExp("_p","g"),"("],[new RegExp("_P","g"),")"],[new RegExp("_b","g"),"["],[new RegExp("_B","g"),"]"],[new RegExp("_s","g"),"/"],[new RegExp("_S","g"),"\\"],[new RegExp("_a","g"),"@"],[new RegExp("_A","g"),"&amp;"],[new RegExp("_x","g"),"+"],[new RegExp("_X","g"),"*"],[new RegExp("_c","g"),","],[new RegExp("_C","g"),":"],[new RegExp("_q","g"),"&apos;"],[new RegExp("_Q","g"),"&quot;"],[new RegExp("_ ","g"),"-"],[new RegExp("__","g"),"_"]]);if("undefined"!=typeof c.multicharts){var b=e("#multichart input:checked").val();"undefined"==typeof b&&(b=e("#multichart").attr("data-permalink")),S("multichart");var y=0;for(var w in c.multicharts){var x=c.multicharts[w];"object"==typeof x&&x.length&&(x=x[0]);for(var D={type:"filter",selected:b},A=w,I=w,o=0;o<g.length;o++){var R=g[o][0],F=g[o][1];I=I.replace(R,F)}var O="fieldInput";"undefined"!=typeof x.addInputClass?O+=" "+x.addInputClass:"undefined"!=typeof c.addInputClass&&(O+=" "+c.addInputClass),m("multichart",A,I,D,O),y++}var L=e("#multichart input:checked").length;0==L&&e("#multichart input:first").attr("checked",!0);var q=fieldsetDisplay.multichart,N=!0;"undefined"!=typeof q.visible&&(N=q.visible),y>1?(N?T("multichart"):k("multichart"),C()):e("#multichart").hide()}var j=e(".config-type-dateType.visible").attr("id"),E=De(r,j);0==E.length&&(E=De(r,"date_type"));for(var z=fieldset[j],_=fieldsetDisplay[j],V=void 0,o=0;"undefined"!=typeof z&&o<z.length;o++){var P="#div-"+j+o,Q=e(P+" input:checked").length>0;e(P+" input").prop("checked",!1),fe(E,o)?(e(P).show(),Q&&(V=o)):e(P).hide()}var H;void 0!=V?H=V:"undefined"!=typeof _&&fe(E,_.selected)?H=_.selected:(H=ue(E),!fe(E,0)&&fe(E,1)?H=2:fe(E,0)&&fe(E,2)&&(H=2)),e("#div-"+j+H+" input").prop("checked",!0),M(H);var U=google.visualization.arrayToDataTable(a),Y=me(t,c),$=c.numberFormat;"undefined"==typeof $&&"undefined"!=typeof c.labels&&"undefined"!=typeof c.labels.yFormat&&($={pattern:c.labels.yFormat}),"undefined"==typeof $&&($={fractionDigits:2,suffix:"%"});var G=[];if(e.isArray($)){G=new Array;for(var o=0;o<$.length;o++)G[o]=new google.visualization.NumberFormat($[o])}else G.push(new google.visualization.NumberFormat($));for(o=1;o<h;o++){var B=(o-1)%G.length,W=G[B];W.format(U,o)}currentTable={data:t,allData:s,table:i,info:c,dataTable:U,origTable:Y,nodata:p,numRows:a.length,numCols:h,largeLabels:v,title:l,params:d,headerObjs:r,headerAlias:n},we(),e("#chart").html(""),Te(currentTable.info.charts),Ae()}function we(){e(".config-type-filter.visible.result-unavailable-disable").each(xe),e(".config-type-filter.visible.result-unavailable-hide").each(xe)}function xe(a){for(var r=e(this),n=r.attr("id"),i=currentTable.headerAlias[n],l=[],d=0;d<currentTable.headerObjs.length;d++){var s=""+currentTable.headerObjs[d][n];"undefined"==typeof s||fe(l,s)||l.push(s),"undefined"!=typeof i&&(s=""+currentTable.headerObjs[d][i],"undefined"==typeof s||fe(l,s)||l.push(s))}t(n+":"+i+":"+l),r.children(".unavailable").removeClass("unavailable"),r.find("input").attr("disabled",!1),r.children("div.fieldInput").each(function(t){var a=e(this),r=a.children("input"),n=r.attr("value");fe(l,n)||a.addClass("unavailable")}),r.find(".unavailable input").attr("disabled",!0);var o=r.children(".fieldInput").not(".unavailable"),f=o.find("input:checked");0===f.length&&o.last().find("input").prop("checked",!0)}function Te(t){if("undefined"!=typeof t){e("#chart").html("");for(var a=0;a<t.length;a++){var r=t[a].chartId;"undefined"==typeof r&&(r="chart"+(a+1)),e("#chart").append('<div id="'+r+'">');var n=t[a].style?t[a].style:currentTable.info.style;"undefined"!=typeof n&&n.length>0&&e("#"+r).attr("style",n)}}}function ke(e,t,a,r){for(var n=[],i=0;i<t.length;i++){var l,d=t[i],s=!1,o=!1,f=d.indexOf("*");f>=0?s=!0:f=d.indexOf("="),0===f?(d=d.substring(1),l=d,o=!0):f>0&&(l=d.substring(f+1),d=d.substring(0,f),o=!0);var u=a[d];if("undefined"!=typeof u&&u.length>1){var c=e[d];if(o&&c===d){var p=fieldsetName[l];c=p}else if(s){var h=fieldset[l],v=h[c];c=v}n.push(c)}}return r?n:n.join(" / ")}function De(e,t){for(var a=[],r=1;r<e.length;r++){var n=e[r][t];"undefined"==typeof n||fe(a,n)||a.push(n)}return a}function Ae(){var a=new google.visualization.DataView(currentTable.dataTable),r={};if("undefined"!=typeof currentTable.info.controls)for(var n=0,i=currentTable.info.controls.length;n<i;n++)g(r,currentTable.info.controls[n]);for(var l,d,s=e(".config-type-dateType.visible"),o=s.attr("id"),f=s.find(":checked"),u=f.attr("data-format")||f.val(),n=0,c=currentTable.dataTable.getNumberOfRows();n<c;n++)l=currentTable.dataTable.getValue(n,0),
d=ie(l,u),currentTable.dataTable.setFormattedValue(n,0,d);var p=[];for(var h in r)for(var v=r[h],b=v.split(","),y=1;y<currentTable.numCols;y++){var m=""+currentTable.headerObjs[y][h],C=currentTable.headerAlias[h];h===o&&"undefined"==typeof C&&(C="date_type");var w=C&&""+currentTable.headerObjs[y][C],x=fe(b,m),T=fe(b,w),k=x||T;k||p.push(y)}a.hideColumns(p);var D,A,I=[],R=currentTable.info.params[0],F=e("#"+R);F.hasClass("config-type-dynamicDateRange")&&(D=F.find(".date-start").val(),A=F.find(".date-end").val());var O=currentTable.info.hideRow;"undefined"==typeof O&&(O="anyEmpty");for(var L=0,c=currentTable.numRows-1;L<c;L++){var q=!1;if("undefined"!=typeof D&&"undefined"!=typeof A){var S=currentTable.dataTable.getValue(L,0);D+=" 00:00:00",A+=" 00:00:00",q=S<D||S>A}if("ignoreEmpty"!==O&&!q){"allEmpty"===O&&(q=!0);for(var y=1,N=currentTable.numCols;y<N;y++)if(!fe(p,y)){var S=currentTable.dataTable.getValue(L,y);"allEmpty"===O?q=q&&null==S:"anyEmpty"===O?q=q||null==S:t("unknown hideRow "+O)}}q&&I.push(L)}a.hideRows(I);for(var j=[],n=0,E=currentTable.headerObjs.length;n<E;n++)fe(p,n)||j.push(currentTable.headerObjs[n]);var M={};for(var z in j[0])M[z]=De(j,z);if("undefined"!=typeof currentTable.info.headerNames)for(var n=0;n<currentTable.dataTable.getNumberOfColumns();n++){var _=ke(currentTable.headerObjs[n],currentTable.info.headerNames,M);currentTable.dataTable.setColumnLabel(n,_)}Oe(currentTable.origTable,r);var V=colors;if(e("#tooManySets").hide(),"undefined"==typeof currentTable.info.charts&&"undefined"==typeof currentTable.info.multicharts)qe(a,currentTable.info,V),drawLegendCounter=0,Le(a,V);else{var P=currentTable.info.charts;if("undefined"==typeof P){var Q=g(void 0,"multichart");P=currentTable.info.multicharts[Q],"object"==typeof P&&"undefined"==typeof P.length&&(P=[P]),Te(P);var H=currentTable.info.multicharts;hasCombo=!1,hasCombo=Ie(H)}drawLegendCounter=0;for(var n=0,U=P.length;n<U;n++){var Y=e.extend({},currentTable.info,P[n]);"undefined"==typeof Y.chartId&&(Y.chartId="chart"+(n+1)),("undefined"!=typeof Y.chartType&&"combo"==Y.chartType||hasCombo===!0)&&(V=comboColors,hasCombo=!0);var $=new google.visualization.DataView(a),G=V;if("undefined"!=typeof Y.hideColumns){for(var p=[],B=[],W=(a.getNumberOfColumns()-1)/currentTable.info.columnClusterSize,J=0;J<W;J++)for(var X=0;X<Y.hideColumns.length;X++){var y=J*currentTable.info.columnClusterSize+Y.hideColumns[X];p.push(y+1),B.push(y)}$.hideColumns(p),G=ge(V,B)}$.getNumberOfColumns()-1>G.length&&(G=V);var Z=qe($,Y,G);Z&&Le($,G)}}}function Ie(e){var t=0;for(var a in e){var r=e[a][0];if("undefined"!=typeof r&&"combo"===r.chartType)return!0;t++}return!1}function Re(t){var a={width:745,height:430},r=e.extend({},a,{alternatingRowStyle:!0,cssClassNames:{headerRow:"tableChart-header",tableRow:"tableChart-even",oddTableRow:"tableChart-odd"}}),n=e("#tableChart")[0];if(currentTable.nodata)e("#tableChart").html("");else{var i=new google.visualization.Table(n);i.draw(t,r)}}function Fe(e){for(var t,a=e,r=0;currentTable.info.headerNames&&r<currentTable.info.headerNames.length&&!t;r++){var n=currentTable.info.headerNames[r],i=n.indexOf("*");if(i==-1&&(i=n.indexOf("=")),0==i){var l=n.substring(1);e==l&&(t=l)}else if(i>=0){var l=n.substring(0,i);e==l&&(t=n.substring(i+1))}}return t&&(a=fieldsetName[t]),a}function Oe(e,t){var a=[],r=[];a.push(e.rows[0]);var n=[];n.push(e.rowHeaders[0]);for(var i=1,l=e.rows.length;i<l;i++){var d,s,o,f,u,c,p,h,v=!0,g=e.rowHeaders[i];for(var b in t)d=t[b],s=d.split(","),o=e.values[i-1],f=o[b],u=fe(s,""+f),c=currentTable.headerAlias[b],p=c&&o[c],h=c&&fe(s,""+p),v=v&&(u||h);v&&(a.push(e.rows[i]),n.push(g))}for(var g,y,m="undefined"==typeof e.dateField?e.headerField:e.headerField.concat(e.dateField),C={},w={},i=0,x=m.length;i<x;i++)g=m[i],y=De(n,g),C[g]=y,w[g]=Fe(g);for(var T,i=0,k=a.length;i<k;i++){T=0==i?ke(w,m,C,!0):ke(n[i],m,C,!0);for(var D=1;D<a[i].length;D++)T.push(a[i][D]);r.push(T)}var A=google.visualization.arrayToDataTable(r);Re(A)}function Le(t,a){var r=1;0==drawLegendCounter&&(e("#chartLegendInner").html("<table></table>"),r=0);for(var n=!0,i=r;i<t.getNumberOfColumns();i++){var l=""+t.getColumnLabel(i),d=l.split(" / "),s=drawLegendCounter%2?"row"+drawLegendCounter+" chartLegend-odd":"row"+drawLegendCounter+" chartLegend-even";e("#chartLegend table").append("<tr class='"+s+"'></tr>");var o="td";if(0==i&&(o="th"),e("#chartLegend table tr:last").append("<"+o+" class='colorCol'>&nbsp;</"+o+">"),i>0){var f=(i-1)%a.length,u=a[f];e("#chartLegend table tr:last "+o).css("backgroundColor",u)}for(var c=0;c<d.length;c++)n=n&&0==d[c].length,e("#chartLegend table tr:last").append("<"+o+">"+d[c]+"</"+o+">");drawLegendCounter++}n&&be("chartLegendInner",currentTable.params,!0),be("citation-filters",currentTable.params,!0)}function qe(a,r,n){var i=a.getNumberOfColumns()-1,l=r.maxSets;"undefined"==typeof l?l=7:l<=0&&(l=1e3);var d;if(i<=0){var s="Sorry, your selection returned no results.";Ee(s),d=!1}else if(i<=l)je(a,r,n),d=!0;else{var s="Sorry, we are not able to show that many lines on the graph at once. Please use the table or select fewer filter options.";Ee(s),e('a[href="#tableContainer"]').click(),t("TOO MANY: "+i+" > "+l),d=!1}return d}function Se(t){var a,r=t.baseOptions,n=e("#chartContainer").is(":visible");return a=n===!1?700:"100%","undefined"==typeof r&&(r={width:a,height:500,chartArea:{left:75,top:30,width:"85%",height:"85%"}}),r}function Ne(e,t,a,r){"undefined"!=typeof a?e[t]=a:"undefined"!=typeof r&&(e[t]=r)}function je(t,a,r){"undefined"==typeof t&&(t=new google.visualization.DataView(currentTable.dataTable)),null!==currentTable.title&&e("#chartBody h1").text(currentTable.title),legendPosition="none",currentTable.nodata?(legendPosition="none",e("#noData").show()):e("#noData").hide();var n=Se(a),i=16,l=1,d=i;!currentTable.nodata&&currentTable.largeLabels&&(d/=2),("line"===a.chartType||"area"===a.chartType||"steppedArea"===a.chartType||"scatterChart"===a.chartType||"combo"===a.chartType||"column"===a.chartType&&t.getNumberOfRows()>12)&&(l=t.getNumberOfRows()/d,l=Math.round(l+1));var s=0,o=!1,f=2,u=0;if("scatterChart"!==a.chartType&&"combo"!==a.chartType||(f=0,u=2),"combo"===a.chartType){for(var c=currentTable.numCols-1,p={},h=0;h<c;h++){var v=h%2;1===v&&(p[h]={type:"line",lineWidth:2,pointSize:0})}var g=e.extend({},n,{legend:{position:legendPosition},vAxis:{title:a.labels.y},hAxis:{gridlines:{count:i},showTextEvery:l,allowContainerBoundaryTextCufoff:!0,title:a.labels.x},animation:{duration:2500},colors:r,isStacked:o,lineWidth:f,pointSize:u,areaOpacity:1,fontName:"Arial",seriesType:"line",series:p})}else var g=e.extend({},n,{legend:{position:legendPosition},vAxis:{title:a.labels.y},hAxis:{gridlines:{count:i},showTextEvery:l,allowContainerBoundaryTextCufoff:!0,title:a.labels.x},animation:{duration:2500},colors:r,isStacked:o,lineWidth:f,pointSize:u,areaOpacity:s,fontName:"Arial"});Ne(g.hAxis,"format",a.labels.xFormat),Ne(g.hAxis,"minValue",a.labels.xMin,0),Ne(g.hAxis,"maxValue",a.labels.xMax,48),Ne(g.vAxis,"format",a.labels.yFormat),Ne(g.vAxis,"minValue",a.labels.yMin,0),Ne(g.vAxis,"maxValue",a.labels.yMax);var b=a.chartId;"undefined"==typeof b&&(b="chart");var y=e("#"+b)[0],m=new a.chartClass(y);m.draw(t,g)}function Ee(t){var a="undefined"==typeof t?"The website encountered an error. Please try again later.":t;e("#loadMsg").text(a),e("#loadMsg").show(),e("#updateLoader").hide()}"boolean"==typeof useRelativeUrl&&useRelativeUrl?(tableUrl="../data/${table}",fieldsUrl="../metadata"):(tableUrl="/data/${table}",fieldsUrl="/metadata"),colors=["#ffc400","#00acc1","#f44336","#4caf50","#fb8c00","#673ab7","#d81b60"],comboColors=["#ffc107","#ffc107","#d84315","#d84315","#4db6ac","#4db6ac","#7cb342","#7cb342","#01579b","#01579b","#6E9CAE","#f57f17","#f57f17","#f48fb1","#f48fb1"],colorPallete={std:colors},colorGroupRaw=[["std","std","std","std","std","std","std","std","std"],["std+std","std+std","std+std","std+std","std+std"],["std+std+std","std+std+std","std+std+std"],["std+std+std+std","std+std+std+std","std+std+std+std"]],colorGroup=[],google.setOnLoadCallback(a),window.init=a;var Me,ze={raceEthnicityCompare:L,qryTypeCompare:q}}(jQuery);