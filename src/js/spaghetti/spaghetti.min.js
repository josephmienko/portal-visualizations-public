!function t(e,a,n){function r(i,l){if(!a[i]){if(!e[i]){var c="function"==typeof require&&require;if(!l&&c)return c(i,!0);if(s)return s(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var o=a[i]={exports:{}};e[i][0].call(o.exports,function(t){var a=e[i][1][t];return r(a?a:t)},o,o.exports,t,e,a,n)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,a){var n=t("./Listener.js");e.exports={init:function(t){var e,a,n=this,r=options.fileName+".csv",s=2;d3.text("../data/spaghetti/state-regions.csv","text/csv",function(t){e=t,--s||n.distributeData(e,a)}),d3.text("../data/spaghetti/"+r,"text/csv",function(t){a=t,--s||n.distributeData(e,a)})},distributeData:function(t,e){var a=this,r=d3.csv.parseRows(t),s=a.createRegionList(r),e=d3.csv.parseRows(e);n.publish("Data loaded",{regions:s,data:e})},createRegionList:function(t){var e={};for(i=1;i<t.length;i++)e[t[i][0]]=t[i][1];return e}}},{"./Listener.js":3}],2:[function(t,e,a){var n=t("./Listener.js");e.exports={init:function(){var t=this;n.subscribe("SVG created",function(e){t.bindUIEvents()})},bindUIEvents:function(){$("#filters a").click(function(){var t=$(this).attr("id");$(this).toggleClass(t);var e=d3.selectAll("path."+t);e.classed("highlight")?e.attr("class",t):e.classed("highlight",!0)})}}},{"./Listener.js":3}],3:[function(t,e,a){var n=function(){var t={},e=t.hasOwnProperty;return{subscribe:function(a,n){e.call(t,a)||(t[a]=[]);var r=t[a].push(n)-1;return{remove:function(){delete t[a][r]}}},publish:function(a,n){e.call(t,a)&&t[a].forEach(function(t){t(void 0!=n?n:{})})}}}();e.exports=n},{}],4:[function(t,e,a){var n=t("./Listener.js");e.exports={init:function(t){var e=this;n.subscribe("Data loaded",function(a){var n=a.data;e.appendRanking(t,n),e.bindChangeOnHover()})},appendRanking:function(t,e){for(var a,n,r,s=t.defaultName,i=t.rankTextBegin,l=t.rankTextMiddle,c=t.rankTextEnd,s=t.defaultName,d=1;d<e.length;d++)r=e[d],n=r[0],n===s&&(a={start:r[1],end:r[2]});d3.selectAll(".stateName").text(s),d3.select("#rankTextBegin").text(i),d3.select("#rankStart").text(a.start),d3.select("#rankTextMiddle").text(l),d3.select("#rankEnd").text(a.end),d3.select("#rankTextEnd").text(c)},bindChangeOnHover:function(){d3.selectAll("#graph path").on("mouseover",function(t,e){var a=d3.select(this).attr("class");d3.select(this).attr("class",a+" current");var n=$(this).attr("state"),r=$(this).attr("start"),s=$(this).attr("end");d3.selectAll(".stateName").text(n),d3.select("#rankStart").text(r),d3.select("#rankEnd").text(s)}).on("mouseout",function(t,e){var a=d3.select(this).attr("class"),n=a.substring(0,a.length-8);d3.select(this).attr("class",n)})}}},{"./Listener.js":3}],5:[function(t,e,a){var n=t("./Listener.js");e.exports={init:function(t){var e=this;n.subscribe("Data loaded",function(t){var a=t.regions,n=t.data;e.appendGraph(n,a)})},appendGraph:function(t,e){var a=this,r=a.getMinMaxValues(t),s=parseInt(d3.select("#graph").style("width"),10)-20,l=476,c=30,d=r.xMin,o=r.xMax,u=r.yMin,p=r.yMax,f=d3.scale.linear().domain([u,p]).range([l-c,0+c]),h=d3.scale.linear().domain([d,o]).range([0+c-5,s-30]),x=d3.range(d,o+1),v=d3.svg.line().x(function(t,e){return h(t.x)}).y(function(t){return f(t.y)}),g=d3.select("#graph").append("svg:svg").attr("width",s).attr("height",l).append("svg:g"),b={},y={};for(i=1;i<t.length;i++){var m=t[i].slice(3,t[i.length-1]),k=[];y[t[i][1]]=t[i][0];var L=!1;for(j=0;j<m.length;j++)""!=m[j]&&(k.push({x:x[j],y:parseFloat(m[j])}),L?j==m.length-1&&(b[t[i][1]].endX=x[j],b[t[i][1]].endVal=parseFloat(m[j])):(b[t[i][1]]={startX:x[j],startVal:parseFloat(m[j])},L=!0));g.append("svg:path").data([k]).attr("state",t[i][0]).attr("start",t[i][1]).attr("end",t[i][2]).attr("class",e[t[i][0]]).attr("d",v)}a.appendAxes(g,h,f,l,u,p,d,o),n.publish("SVG created")},appendAxes:function(t,e,a,n,r,s,i,l){t.append("svg:line").attr("x1",e(i)).attr("y1",a(r)).attr("x2",e(l)).attr("y2",a(r)).attr("class","axis"),t.append("svg:line").attr("x1",e(i)).attr("y1",a(r)).attr("x2",e(i)).attr("y2",a(s)).attr("class","axis"),t.selectAll(".xLabel").data(e.ticks(5)).enter().append("svg:text").attr("class","xLabel").text(String).attr("x",function(t){return e(t)}).attr("y",n-10).attr("text-anchor","middle"),t.selectAll(".yLabel").data(a.ticks(4)).enter().append("svg:text").attr("class","yLabel").text(String).attr("x",0).attr("y",function(t){return a(t)}).attr("text-anchor","right").attr("dy",3),t.selectAll(".xTicks").data(e.ticks(5)).enter().append("svg:line").attr("class","xTicks").attr("x1",function(t){return e(t)}).attr("y1",a(r)).attr("x2",function(t){return e(t)}).attr("y2",a(r)+7),t.selectAll(".yTicks").data(a.ticks(4)).enter().append("svg:line").attr("class","yTicks").attr("y1",function(t){return a(t)}).attr("x1",e(0)).attr("y2",function(t){return a(t)}).attr("x2",e(0))},getMinMaxValues:function(t){for(var e=parseInt(t[0][3]),a=parseInt(t[0].slice(-1)[0]),n=0,r=0,s=1;s<t.length;s++){var i=t[s].slice(3),l=Math.max.apply(Math,i);l>r&&(r=l)}return{yMin:n,yMax:r,xMin:e,xMax:a}}}},{"./Listener.js":3}],6:[function(t,e,a){var n=t("./Listener.js");e.exports={init:function(){var t=this;n.subscribe("Data loaded",function(e){var a=e.data;t.appendTable(a)})},appendTable:function(t){for(var e,a,n=[],r=0;r<t.length;r++){var e=t[r];a=e.splice(1,2),n.push(e)}var s=n[0],i=n.slice(1),l=d3.select("#table").append("table").attr("class","striped"),c=l.append("thead"),d=l.append("tbody");c.append("tr").selectAll("th").data(s).enter().append("th").text(function(t){return t}),d.selectAll("tr").data(i).enter().append("tr").selectAll("td").data(function(t){return t}).enter().append("td").text(function(t){return t}),$("#table table").DataTable({bPaginate:!1,oLanguage:{sSearch:"Type and press enter to filter results: "}})}}},{"./Listener.js":3}],7:[function(t,e,a){var n=(t("./modules/Listener.js"),t("./modules/DataService.js")),r=t("./modules/Filters.js"),s=t("./modules/RankBlurb.js"),i=t("./modules/SpaghettiPlot.js"),l=t("./modules/Table.js"),c={init:function(t){n.init(t),i.init(),r.init(),s.init(t),l.init()}};window.SpaghettiApp=c},{"./modules/DataService.js":1,"./modules/Filters.js":2,"./modules/Listener.js":3,"./modules/RankBlurb.js":4,"./modules/SpaghettiPlot.js":5,"./modules/Table.js":6}]},{},[7]);