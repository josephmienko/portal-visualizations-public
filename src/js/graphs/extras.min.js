!function t(e,a,n){function r(o,s){if(!a[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=a[o]={exports:{}};e[o][0].call(f.exports,function(t){var a=e[o][1][t];return r(a?a:t)},f,f.exports,t,e,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,a){var n=t("./DetectFeatureSupport.js");e.exports={init:function(){var t=this,e=n.detectIE(),a=$("#data-title h2").text().replace(/ /g,"_");t.appendCitation(),$("#js-citationDownload").on("click",function(){var n=t.scrapeCitationDetails(),r=new Blob([n]);e?window.navigator.msSaveOrOpenBlob(r,a+".txt"):saveAs(r,a+".txt")})},appendCitation:function(){var t,e,a,n;t=$("#data-title h2").text();var r=new Date;e=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear(),a=r.getFullYear(),n=window.location.href,$("#citation-title").empty().append(t),$("#citation-year").empty().append(a),$("#citation-date").empty().append(e),$("#citation-url").empty().append(n)},scrapeCitationDetails:function(){var t,e,a,n,r;return t=$("#data-title h2").text(),citation=$("#citation-example").text(),e=$("#dbUpdated").text(),a=$("#permalink a").attr("href"),n="Filters used: \r\n",$(".config-type-filter.visible").each(function(){var t=$(this).children().find(".fieldsetLabel").text(),e=$(this).children().find(".fieldInput:checked").next("label").map(function(){return $(this).text()}).get().join("; ");"Date Range"==t&&(e=$("#dynamicMonthStart .slider").text()),n+="	"+t+": "+e+"\r\n"}),$("#citation-filters .filter").each(function(){var t=$(this).text();n+="	"+t+"\r\n"}),r="Citation downloaded from Center for Social Sector Analytics & Technology\r\n\r\n",r+=citation+"\r\n\r\n",r+=n+"\r\n\r\n",r+=e+"\r\n\r\n",r+="Permanent link: "+a}}},{"./DetectFeatureSupport.js":3}],2:[function(t,e,a){var n=t("./DetectFeatureSupport.js");e.exports={downloadFile:$("#data-title h2").text().replace(/ /g,"_"),init:function(){var t=this,e=n.detectIE();$("#js-dataDownload").on("click",function(){e?t.toText():t.toCSV()})},toCSV:function(){var t=",",e=this.scrapeTableData(t),a=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(a,this.downloadFile+".csv")},toText:function(){var t="	",e=this.scrapeTableData(t),a=new Blob([e]);window.navigator.msSaveOrOpenBlob(a,this.downloadFile+".txt")},scrapeTableData:function(t){for(var e=$("table.google-visualization-table-table")[0],a=e.rows.length,n=e.rows[0].cells.length,r="",i=0;n>i;i++){var o=e.rows[0].cells[i].textContent.split(String.fromCharCode(8195)).join("")+",";r+=o}r=r.substring(0,r.length-1),r+="\r\n";for(var s=1;a>s;s++){for(var l=0;n>l;l++)r+=e.rows[s].cells[l].innerHTML.split(",").join("")+t;r+="\r\n"}return r}}},{"./DetectFeatureSupport.js":3}],3:[function(t,e,a){e.exports={detectIE:function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,a=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=a.exec(e)&&(t=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var e=navigator.userAgent,a=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=a.exec(e)&&(t=parseFloat(RegExp.$1))}return-1==t?!1:!0},detectSVG:function(){var t="undefined"!=typeof SVGRect;return t}}},{}],4:[function(t,e,a){var n=t("./DataDownload.js"),r=t("./CitationDownload.js"),i=t("./Share.js"),o=(t("./ImageDownload.js"),{run:function(){n.init(),r.init(),i.init()}});o.run()},{"./CitationDownload.js":1,"./DataDownload.js":2,"./ImageDownload.js":5,"./Share.js":6}],5:[function(t,e,a){var n=t("./DetectFeatureSupport.js");e.exports={init:function(){var t=this;t.bindUIEvents(),setTimeout(function(){t.graphToDataURL()},5e3)},bindUIEvents:function(){var t=this,e=n.detectSVG(),a=!1;try{a=!!new Blob}catch(r){}"undefined"!=typeof requestFileSystem||"undefined"!=typeof webkitRequestFileSystem||"undefined"!=typeof mozRequestFileSystem||"undefined"!=typeof navigator.msSaveBlob;e&&a?($("#js-imageDownload").click(function(){t.downloadImage()}),$("#update").click(function(){setTimeout(function(){t.graphToDataURL()},5e3)})):alert("Sorry, this feature is not supported for your broswer")},downloadImage:function(){var t=$("#canvas canvas"),e=$("#data-title h2").text().replace(/ /g,"_"),a=e+".png",n=$(t)[0];n.toBlob(function(t){saveAs(t,a)})},graphToDataURL:function(){var t=0,e=0,a=$("#canvas canvas"),n=a[0],r=n.getContext("2d"),i=60,o=$("#data-title").css("font-family"),s="bold 16px "+o;t+=2*i,offset=[],$("#chart svg").each(function(a){offset[a]=t;var n=parseInt($(this).attr("height")),r=parseInt($(this).attr("width"));console.log("Height: "+n+" width: "+r),t+=n,e=r>e?r:e}),r.save();for(var l=$("#chartLegend td").css("font-family"),c=$("#chartLegend table tr"),f=10,d=5,p=5,u=[],h=[],v=[],g=[],m=[],x=0;x<c.length;x++){var w=0===x?"bold":"normal";g[x]=w+" "+f+"px "+l,r.font=g[x];var y=c[x];m[x]=[],u[x+1]=t,t+=f+d;var b=$(y),D=b.children("td");D.length||(D=b.children("th"));for(var S=0;S<D.length;S++){var F=D[S],j=$(F).text();j=j?j:"",j=j.replace("&nbsp;"," "),m[x][S]=j;var k=r.measureText(j).width;h[S]=0===x||!h[S]||k>h[S]?k:h[S],0===S&&(v[x]=$(F).css("background-color"))}}var C=[],L=0;h[0]=f;for(var R=0;R<h.length;R++){C[R]=L;var T=h[R];L+=T+p}e=L>e?L:e,t+=50,r.restore();var I=$("#dbUpdated").text(),U=new Date,A=U.getMonth()+1+"/"+U.getDate()+"/"+U.getFullYear();a.height(t),a.width(e),n.height=t,n.width=e,r.save(),r.fillStyle="#ffffff",r.fillRect(0,0,e,t),r.restore(),r.save(),r.fillStyle="#000000",r.font=s,r.textAlign="center";var E=$("#data-title h2").text();r.fillText(E,n.width/2,i),r.restore(),r.save(),r.fillStyle="#000000",r.font="normal 14px"+o,r.textAlign="center";var M=$("#data-title h4").text();r.fillText(M,n.width/2,i+20),r.restore();var O=$("#chart svg").siblings("div");$(O).remove(),$("#chart svg").each(function(t,e){var a=e.parentNode.innerHTML,i={offsetY:offset[t],ignoreClear:!0,ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0};r.save(),canvg(n,a,i),r.restore()}),r.save();var B=t-5;dateText=I+"  |  Data accessed "+A,r.textAlign="left",r.fillText(dateText,25,B),r.restore(),r.save();var P="http://data.partnersforourchildren.org/",q=B;if(r.textAlign="right",r.fillText(P,e-200,q),r.restore(),n.toDataURL){var N=$("#image img")[0];N.src=n.toDataURL()}}}},{"./DetectFeatureSupport.js":3}],6:[function(t,e,a){e.exports={init:function(){var t=this;$("#js-share").click(function(){t.makeShortURL()})},appendShareLinks:function(t){$("#twitter").attr("href","http://twitter.com/share?url="+t),$("#email").attr("href","mailto:"+t),$("#facebook").attr("href","http://www.facebook.com/sharer.php?u="+t)},makeLongURL:function(){var t=this,e=t.getParamsArray(),a=window.location.href,n=a.indexOf("#");n>0&&(a=a.substring(0,n));var r="#";for(var i in e)for(var o=e[i],s=0;s<o.length;s++){var l=o[s];a+=r+i+"="+l,r="&"}return a},makeShortURL:function(){var t,e=this,a=e.makeLongURL();$("#short-url").empty().append(a);var n=function(){var n=gapi.client.urlshortener.url.insert({resource:{longUrl:a}});n.execute(function(a){t=a.id;var n=t;e.appendShareLinks(n),$("#short-url").empty().append(n)})},r=function(){gapi.client.setApiKey("AIzaSyBEI7IXW6i305kffzOcnkfMmv5H67Gsn-I"),gapi.client.load("urlshortener","v1",n)};window.googleApiLoaded=r,$(document.body).append('<script src="https://apis.google.com/js/client.js?onload=googleApiLoaded"></script>')},getParamsArray:function(){var t={},e=this;return $(".fieldset.visible").each(function(){var a=$(this),n=a.attr("id"),r=void 0;a.hasClass("config-type-dateRange")||a.hasClass("config-type-dynamicDateRange")?r=e.getParamsFromFieldsetRange(a):a.hasClass("config-type-param")||a.hasClass("config-type-filter")?r=e.getParamsFromFieldsetCheckboxes(a):consoleLog("Unexpected parameter to get: "+fieldName),r&&(t[n]=r)}),t},getParamsFromFieldsetCheckboxes:function(t){var e=[];return t.find("input:checked").each(function(){var t=$(this).val();e.push(t)}),e},getParamsFromFieldsetRange:function(t){var e=t.find(".control").slider("option","values");return e}}},{}]},{},[4]);